
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script  type="text/javascript" src="/onlinetest/scripts/xhr.js"></script>
<script  type="text/javascript" src="/onlinetest/scripts/json.js"></script>
<title>Test</title>
<style type="text/css">
table.altrowstable {
    font-family: verdana,arial,sans-serif;
    font-size:12px;
    color:#333333;
    border-width: 1px;
    border-color: #a9c6c9;
    border-collapse: collapse;
}
table.altrowstable th {
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
}
table.altrowstable td {
    
    border-width: 1px;
    padding: 8px;
    border-style: solid;
    border-color: #a9c6c9;
}
.oddrowcolor{
    background-color:#d4e3e5;
}
.evenrowcolor{
    background-color:#c3dde0;
}

 a:hover {
   text-decoration: none;
   color:blue;
    }
</style>

<script type="text/javascript"> 
var first=1;
var cldt=0;
function setHeight()
{
	var theHeight;
	if (window.innerHeight) {
		theHeight=window.innerHeight;
		}
		else if (document.documentElement && document.documentElement.clientHeight) {
		theHeight=document.documentElement.clientHeight;
		}
		else if (document.body) {
		theHeight=document.body.clientHeight;
		}
	  if(theHeight>200)
	  {
		  theHeight -=170;
	  }
	document.getElementById("sh").height=theHeight;
}

function clear()
{
	while(document.getElementById("errdiv").hasChildNodes())
		document.getElementById("errdiv").removeChild(document.getElementById("errdiv").lastChild);
}


function init()
{
	var ts = document.createElement("INPUT");
	ts.value="Start Test";
	ts.type="button";
	ts.setAttribute("onClick", 'init1()');
	document.getElementById("pla").appendChild(ts);
}

function init1()
{
	while(document.getElementById("pla").hasChildNodes())
		document.getElementById("pla").removeChild(document.getElementById("pla").lastChild);
	document.getElementById("skpans").removeAttribute("style");
	document.getElementById("subans").removeAttribute("style");
	XHR("/onlinetest/studenturl/getquestion","getquestionRes");
}

function clock()
{
	cldt--;
	if(cldt>=0)
	{
		if(cldt<=600)
			document.getElementById("fnt").style.color="red";
		document.getElementById("fnt").firstChild.nodeValue= ("Time Left : "+ parseInt((cldt/60).toString()) +" : " +parseInt((cldt%60).toString()));
			//document.getElementById("txt").nodeValue= ("Time Left : "+ parseInt((cldt/60).toString()) +" : " +parseInt((cldt%60).toString()));
		if(cldt==0)
		{
			alert("Time Over");
			skipqid();
			return;			
		}	
		setTimeout("clock()",1000); 
	}		
}
function getquestionRes(hr)
{
	document.body.style.cursor = 'default';
	var res=hr.responseText;
	if(res.trim()=="log")
	{
		alert("You tried an invalid operation");
		self.close();
		window.location.href= "/onlinetest";
	}	
	var jsonobj=JSON.parse(res);
	if(jsonobj.msg=="1")
	{
		if(first==1)
			alert("You do not have any exam now");
		else
			alert("You have submitted all questions.So this test is complete.");
		self.close();
		window.location.href= "/onlinetest";
		return;
	}	
	else if(jsonobj.msg=="3")
	{
		self.close();
		window.location.href= "/onlinetest";
		return;
	}	
	else if(jsonobj.msg=="5")
	{
		alert("Your Ip Adress is not matching.")
		self.close();
		window.location.href= "/onlinetest";
		return;
	}	
	
	while(document.getElementById("pla").hasChildNodes())
		document.getElementById("pla").removeChild(document.getElementById("pla").lastChild);
	document.getElementById("qid").value=jsonobj.qid;
	document.getElementById("choic").value=jsonobj.choice;
	cldt=jsonobj.time;
	var fnt = document.createElement("font");
	fnt.id="fnt";
	fnt.style.color="black";
	var txt = document.createTextNode("Time Left : "+ parseInt((cldt/60).toString()) +" : " +parseInt((cldt%60).toString()));
	fnt.appendChild(txt);
	document.getElementById("pla").appendChild(fnt);
	if(first==1)
		setTimeout("clock()",1000);
	first=2;
	var tab = document.createElement("TABLE");
	var status=jsonobj.status;
	if(status>0)
	{	
		var str = document.createElement("TR");
		var std= document.createElement("TD");
		var fnt1 = document.createElement("font");
		if((status==1) || (status==2))
		{
			fnt1.style.color="green";
			fnt1.style.fontWeight="normal";
			fnt1.appendChild(document.createTextNode("New Question"));
		}	
		else if((status==3) || (status==4))
		{	
			fnt1.style.color="orange";
			fnt1.style.fontWeight="bold";
			fnt1.style.fontSize="15px"
			fnt1.appendChild(document.createTextNode("You have skipped this question previously"));
		}	
		else if((status==5) || (status==6))
		{	
			fnt1.style.color="red";
			fnt1.style.fontWeight="bolder";
			fnt1.style.fontSize="18px"
			fnt1.appendChild(document.createTextNode("This question is coming for the last time"));
		}	
		std.appendChild(fnt1);
		str.appendChild(std);
		tab.appendChild(str);
	}
	var mtr12=document.createElement("TR");
	var mtd12=document.createElement("TD");
	mtd12.appendChild(document.createTextNode("Marks : " + jsonobj.marks));
	mtr12.appendChild(mtd12);
	tab.appendChild(mtr12);
	var mtr=document.createElement("TR");
	var mtd=document.createElement("TD");
	var f = document.createElement("TEXTAREA");
	f.id="qarea";
	f.setAttribute("readonly","readonly");
	f.setAttribute("style","font-weight: bold");
	f.rows=2;
	f.cols=50;
	f.setAttribute("onFocus",'dis()');
	f.value=jsonobj.question;
	mtd.appendChild(f);
	mtr.appendChild(mtd);
	tab.appendChild(mtr);
	
	var mtr1 = document.createElement("TR");
	if(jsonobj.choice==true)
	{
		var mtd1 = document.createElement("TD");
		var cho1 = document.createElement("INPUT");
		cho1.type="radio";
		cho1.id="cho";
		cho1.name="cho";
		cho1.value="1";
		mtd1.appendChild(cho1);
		mtd1.appendChild(document.createTextNode(jsonobj.ch1));
		mtr1.appendChild(mtd1);
		tab.appendChild(mtr1);
		var mtr2 = document.createElement("TR");
		var mtd2 = document.createElement("TD");
		var cho2 = document.createElement("INPUT");
		cho2.type="radio";
		cho2.id="cho";
		cho2.name="cho";
		cho2.value="2";
		mtd2.appendChild(cho2);
		mtd2.appendChild(document.createTextNode(jsonobj.ch2));
		mtr2.appendChild(mtd2);
		tab.appendChild(mtr2);
		if(jsonobj.ch3.length!=0)
		{	
			var mtr3 = document.createElement("TR");
			var mtd3 = document.createElement("TD");
			var cho3 = document.createElement("INPUT");
			cho3.type="radio";
			cho3.id="cho";
			cho3.name="cho";
			cho3.value="3";
			mtd3.appendChild(cho3);
			mtd3.appendChild(document.createTextNode(jsonobj.ch3));
			mtr3.appendChild(mtd3);
			tab.appendChild(mtr3);
			if(jsonobj.ch4.length!=0)
			{	
				var mtr4 = document.createElement("TR");
				var mtd4 = document.createElement("TD");
				var cho4 = document.createElement("INPUT");
				cho4.type="radio";
				cho4.id="cho";
				cho4.name="cho";
				cho4.value="4";
				mtd4.appendChild(cho4);
				mtd4.appendChild(document.createTextNode(jsonobj.ch4));
				mtr4.appendChild(mtd4);
				tab.appendChild(mtr4);
			}
		}
	}	
	else
	{
		var mtd1 = document.createElement("TD");
		var cho1 = document.createElement("TEXTAREA");
		cho1.cols=50;
		cho1.rows=20;
		cho1.setAttribute("onKeyUp",'fieldlength(this,2000)');
		cho1.id="cho";
		mtd1.appendChild(cho1);
		mtd1.appendChild(document.createTextNode("max. 2000 chars"));
		mtr1.appendChild(mtd1);
		tab.appendChild(mtr1);
	}
	document.getElementById("pla").appendChild(tab);
	if(document.getElementById("td1").hasChildNodes())
		document.getElementById("td1").firstChild.nodeValue="Total : " + jsonobj.total;
	if(document.getElementById("td2").hasChildNodes())
		document.getElementById("td2").firstChild.nodeValue="Skipped : " + jsonobj.skppd;
	if(document.getElementById("td3").hasChildNodes())
		document.getElementById("td3").firstChild.nodeValue="Submitted : " + jsonobj.subm;
	document.getElementById("qarea").style.fontSize="20px";
	autoTextAreaSize(document.getElementById("qarea"));
	document.getElementById("skpans").removeAttribute("disabled");
	document.getElementById("subans").removeAttribute("disabled");
	document.getElementById("qarea").focus();
}

function dis()
{
	document.getElementById("cho").focus();
}

function subqid()
{
	var qid= document.getElementById("qid").value;
	var choic = document.getElementById("choic").value;
	var ans="0";
	clear();
	if(choic=="true")
	{	
		var obj = document.getElementsByName("cho");
		for(var i = 0;i<obj.length;i++)
		{
			if(obj[i].checked)
			{	
				ans=obj[i].value;
			}	
		}
		if(ans=="0")
		{
//			alert("Please choose one answer");
			
			var t = document.createTextNode("Please choose one answer");
			var fnt=document.createElement("font");
			fnt.style.color = "red";
			fnt.appendChild(t);
			document.getElementById("errdiv").appendChild(fnt);
						
			return;
		}
	}
	else
		ans=document.getElementById("cho").value;
	if(ans=="" && ans.trim()=="")
	{
		//alert("Please enter answer if you want to submit");
		var t = document.createTextNode("Please enter answer if you want to submit");
		var fnt=document.createElement("font");
		fnt.style.color = "red";
		fnt.appendChild(t);
		document.getElementById("errdiv").appendChild(fnt);
		return;
	}	
	if(ans.trim().length>2000)
	{
		alert("Please enter an answer of maximum 2000 characters");
		return;
	}	
	document.body.style.cursor = 'wait';
	document.getElementById("skpans").setAttribute("disabled","disabled");
	document.getElementById("subans").setAttribute("disabled","disabled");
	XHR("/onlinetest/studenturl/subquestion","getquestionRes","qid="+qid+"&answer="+encodeURIComponent(ans));
}

function skipqid()
{
	var qid= document.getElementById("qid").value;
	clear();
	document.body.style.cursor = 'wait';
	document.getElementById("skpans").setAttribute("disabled","disabled");
	document.getElementById("subans").setAttribute("disabled","disabled");
	XHR("/onlinetest/studenturl/skipquestion?qid="+qid,"getquestionRes");
}

function fieldlength(field,length)
{
	if(field.value.length > length)
		field.value=field.value.substring(0,(length-1));
}

function autoTextAreaSize(ele) 
{  
	ele.style.height = 'auto';  
	var newHeight = (ele.scrollHeight > 32 ? ele.scrollHeight : 32);  
	ele.style.height = newHeight.toString() + 'px';  
}  

function getname()
{
	XHR("/onlinetest/studenturl/getname?mode=1","getPhoto");
}

function getPhoto(hr)
{
	var res=hr.responseText;
	document.getElementById("idname").value=res;
	document.getElementById("myImage").src="/onlinetest/studenturl/getname";
}


String.prototype.trim = function() {
	 return this.replace(/^\s+|\s+$/g, '');
	 };

</script>
</head>
<body onload="setHeight(),init();getname()" oncontextmenu="return false;">
<div  style="width:100%">
</div>
<div>
<table align="center" width="100%" border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2" align="center" >
<table>
<tr><td>
<input type="text" id="idname" readonly="readonly">
</td><td width="200" height="200" align="center" vAlign="top" bgColor="#ffff98" > <img  id="myImage"  ></td></tr>
</table>

</td></tr>


<tr><td valign="top" width="190px">
<table><tr><td valign="top" style="height:250px" class="leftmenuborder" width="180px">
<table>
<tr><td id="td1">&nbsp;</td></tr>
<tr><td id="td2">&nbsp;</td></tr>
<tr><td id="td3">&nbsp;</td></tr>
</table>

</td></tr></table>

</td>
<td valign="top" align="center" id="sh">

<br/>
<br/>
<div id="pla">

</div> 
<input type="hidden" id="qid" onClick="init()">
<input type="hidden" id="choic">
<input type="button" value="Skip" onClick="skipqid()" id="skpans" style="display:none">
<input type="button" value="submit" onClick="subqid()" id="subans" style="display:none">
<br/>
<div id="errdiv">

</div>
 
</td></tr>
</table>
</div>
</body>
</html>býŽ•      ]gB&]gB'@¾w       4    :http://192.168.1.3:9090/onlinetest/student/test.jsp necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Pragma: No-cache
Cache-Control: no-cache
Expires: Thu, 01 Jan 1970 05:30:00 IST
Content-Type: text/html;charset=ISO-8859-1
Date: Thu, 29 Aug 2019 02:14:58 GMT
 original-response-headers Server: Apache-Coyote/1.1
Pragma: No-cache
Cache-Control: no-cache
Expires: Thu, 01 Jan 1970 05:30:00 IST
Content-Type: text/html;charset=ISO-8859-1
Transfer-Encoding: chunked
Date: Thu, 29 Aug 2019 02:14:58 GMT
 charset windows-1252 uncompressed-len 0 predictor::resource-count 3 predictor::http://192.168.1.3:9090/onlinetest/scripts/xhr.js 1,1,1567048230,4096 predictor::http://192.168.1.3:9090/onlinetest/scripts/json.js 1,1,1567048230,4096 net-response-time-onstart 32 net-response-time-onstop 70 predictor::http://192.168.1.3:9090/onlinetest/studenturl/getname 1,1,1567048230,4097   -®